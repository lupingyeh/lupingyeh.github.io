/*
	jQuery Memory Game plugin
	March, 2011
	By: Don Burks

*/
(function(a){var g={tileCount:24,delay:1500,timeout:8E3},c={},d=false,h=g.tileCount/2,j,e;a.fn.shuffle=function(){for(var b=[];this.length;)b.push(this.splice(Math.random()*this.length,1));for(;b.length;)this.push(b.pop());return this};a.clearTiles=function(){a(".hidden").each(function(){var f=a(this).parent("li");f.css("background-image","none");f.find("img").remove();f.addClass("cleared")});d=false;if(a.endOfGame()){var b=a("<div />").attr("id","winner");b.html("Congratulations! You Win!");b.click(function(){b.fadeOut("fast",
function(){b.remove();a.initGame()})});e.empty().prepend(b);b.fadeIn("fast")}};a.revertTiles=function(){a(".hidden").fadeIn("slow").removeClass("hidden");d=false};a.randomize=function(){var b=a("#memory_ul"),f=b.find("li").shuffle();b.empty();a.each(f,function(){a(this).appendTo(b)})};a.endOfGame=function(){return a(".cleared").length==c.tileCount?true:false};a.initGame=function(){e.empty();$ul=a("<ul>").attr("id","memory_ul");for(i=1;i<=h;++i){$li=a("<li>").addClass("tile_"+i).addClass("tile_container");
a('<img src="images/tile.png" class="tile" />').appendTo($li);$li.appendTo($ul);$new_li=$li.clone();$new_li.appendTo($ul)}$ul.appendTo(e);a.randomize();a("img.tile").click(function(){if(d)return false;var b=a(this).parent("li").attr("class");b=b.split(" ");if(a(".first").length>0){clearTimeout(j);firstClass=a(".first").parent("li").attr("class");firstClass=firstClass.split(" ");a(this).fadeOut("fast").addClass("hidden");if(b[0]==firstClass[0]){d=true;setTimeout("$.clearTiles()",c.delay)}else{d=true; setTimeout("$.revertTiles()",c.delay);a(".first").removeClass("first")}}else{j=setTimeout('$.revertTiles();$(".first").removeClass("first");',c.timeout);a(this).addClass("first").fadeOut("fast").addClass("hidden")}})};a.fn.memoryGame=function(b){e=a(this);c=typeof b==="object"?a.extend(g,b):g;h=c.tileCount/2;a.initGame();return e}})(jQuery);
